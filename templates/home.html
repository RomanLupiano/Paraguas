{% extends "layout.html" %}

{% block content %}
<div class="container-fluid">
  <form action="/" method="POST">
      <label for="city"><h1>Enter your city name to search for weather data</h1></label>
      <input type="text" class="form-control" id="city" name="city" placeholder="City name">
      <button class="btn btn-primary">Search</button>
  </form>
  <button class="btn btn-primary" onclick="getLocation()" >Find my city</button>

  {% if temperature %}
    <div class="row">
      <div class="col">
        <h1>¿Debería usar paraguas?</h1>
        <h2>{{answer1}}</h2>
      </div>
      <div class="col">
        <h1>¿Debería usar abrigo?</h1>
        <h2>{{answer2}}</h2>
      </div>
    </div>

    <h2>Temperature: {{temperature}}</h2>
    <h2>Feels like: {{feels_like}}</h2>
    <h2>Pressure: {{pressure}}</h2>
    <h2>Humidity: {{humidity}}</h2>
    <h2>Clouds: {{clouds}}</h2>
    <h2>Wind Speed: {{wind_speed}}</h2>
    <h2>Chance of rain in this hour: {{hourly_pop}}</h2>
    <h2>Chance of rain in this day: {{daily_pop}}</h2>
  {% endif %}
</div>
    
<script>
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function showPosition(position) {
    window.location.href = "/find-city/" + position.coords.latitude + "/" + position.coords.longitude + "/";
}
</script>

{% endblock %}